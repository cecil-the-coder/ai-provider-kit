{"id":"workspace-0ha","title":"APK 3.2: Add Metrics Handler","description":"Add Metrics Handler. Priority P1 - High. Estimated: 6 hours.\n\nFeatures:\n- Provider metrics endpoint\n- System metrics endpoint\n- Racing performance metrics endpoint\n\nAcceptance Criteria:\n- Provider metrics endpoint\n- System metrics endpoint\n- Racing performance metrics endpoint","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:46.23127434Z","updated_at":"2025-11-29T01:59:46.23127434Z","dependencies":[{"issue_id":"workspace-0ha","depends_on_id":"workspace-sqx","type":"blocks","created_at":"2025-11-29T02:00:40.341629509Z","created_by":"daemon"}]}
{"id":"workspace-1nh","title":"APK 2.2: Implement Provider Management Handler","description":"Implement Provider Management Handler. Priority P0 - Blocking. Estimated: 8 hours.\n\nFile: pkg/backend/handlers/providers.go\n\nFeatures:\n- List providers\n- Get provider\n- Update provider\n- Provider health checking\n- Provider testing endpoint\n- Virtual provider support\n\nAcceptance Criteria:\n- List, Get, Update providers\n- Provider health checking\n- Provider testing endpoint\n- Virtual provider support\n- Unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:41.694171306Z","updated_at":"2025-11-29T01:59:41.694171306Z","dependencies":[{"issue_id":"workspace-1nh","depends_on_id":"workspace-uud","type":"blocks","created_at":"2025-11-29T02:00:39.238774367Z","created_by":"daemon"}]}
{"id":"workspace-1x4","title":"APK 2.4: Implement Health and Status Handlers","description":"Implement Health and Status Handlers. Priority P1 - High. Estimated: 4 hours.\n\nFile: pkg/backend/handlers/health.go\n\nFeatures:\n- Status endpoint\n- Health endpoint with provider health\n- Version information\n\nAcceptance Criteria:\n- Status endpoint\n- Health endpoint with provider health\n- Version information\n- Unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:43.570379278Z","updated_at":"2025-11-29T01:59:43.570379278Z","dependencies":[{"issue_id":"workspace-1x4","depends_on_id":"workspace-uud","type":"blocks","created_at":"2025-11-29T02:00:39.2596464Z","created_by":"daemon"}]}
{"id":"workspace-2fy","title":"APK 1.8: Create Core Middleware","description":"Create core middleware components. Priority P0 - Blocking. Estimated: 4 hours.\n\nFiles to create:\n- pkg/backend/middleware/requestid.go - Request ID generation\n- pkg/backend/middleware/cors.go - CORS handling\n- pkg/backend/middleware/logging.go - Request logging\n- pkg/backend/middleware/recovery.go - Panic recovery\n- pkg/backend/middleware/auth.go - Authentication\n\nAcceptance Criteria:\n- All middleware implemented and tested\n- Middleware follows standard http.Handler pattern\n- Configuration-driven behavior\n- Unit tests for each middleware","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:22.707956383Z","updated_at":"2025-11-29T01:59:22.707956383Z","dependencies":[{"issue_id":"workspace-2fy","depends_on_id":"workspace-30d","type":"blocks","created_at":"2025-11-29T02:00:38.086448065Z","created_by":"daemon"}]}
{"id":"workspace-2ix","title":"APK 1.5: Implement Fallback Virtual Provider","description":"Implement Fallback virtual provider. Priority P0 - Blocking. Estimated: 4 hours.\n\nFile: pkg/providers/virtual/fallback/provider.go\n\nFeatures:\n- FallbackProvider tries providers in order until one succeeds\n- Config with ProviderNames, MaxRetries\n- GenerateChatCompletion iterates through providers\n- Returns first successful response\n- Wraps stream with fallback metadata\n\nAcceptance Criteria:\n- Fallback provider implements types.Provider\n- Tries providers in order\n- Returns first successful response\n- Proper error aggregation\n- Unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:18.434416673Z","updated_at":"2025-11-29T01:59:18.434416673Z","dependencies":[{"issue_id":"workspace-2ix","depends_on_id":"workspace-30d","type":"blocks","created_at":"2025-11-29T02:00:38.055851386Z","created_by":"daemon"}]}
{"id":"workspace-2xd","title":"APK 2.3: Implement Generation Handler","description":"Implement Generation Handler. Priority P0 - Blocking. Estimated: 8 hours.\n\nFile: pkg/backend/handlers/generate.go\n\nFeatures:\n- Generate endpoint with extension hooks\n- Provider selection (including virtual providers)\n- BeforeGenerate/AfterGenerate hook calls\n- Error handling with extension notification\n\nAcceptance Criteria:\n- Generate endpoint with extension hooks\n- Provider selection (including virtual providers)\n- Error handling with extension notification\n- Unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:42.494615461Z","updated_at":"2025-11-29T01:59:42.494615461Z","dependencies":[{"issue_id":"workspace-2xd","depends_on_id":"workspace-uud","type":"blocks","created_at":"2025-11-29T02:00:39.248923053Z","created_by":"daemon"}]}
{"id":"workspace-30d","title":"APK 1.1: Create Package Structure","description":"Create new package structure for ai-provider-kit backend. Priority P0 - Blocking.\n\nCreate directories:\n- pkg/backend/{handlers,middleware,extensions}\n- pkg/backendtypes\n- pkg/providers/virtual/{racing,fallback,loadbalance}\n\nFiles to create:\n- pkg/backend/doc.go - Package documentation\n- pkg/backendtypes/doc.go - Package documentation\n- pkg/providers/virtual/doc.go - Virtual providers documentation\n\nAcceptance Criteria:\n- Package structure created\n- Documentation explains purpose of each package","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:14.654679625Z","updated_at":"2025-11-29T01:59:14.654679625Z"}
{"id":"workspace-30w","title":"APK 3.4: Register Virtual Providers in Factory","description":"Register Virtual Providers in Factory. Priority P0 - Blocking. Estimated: 4 hours.\n\nUpdate factory to register virtual providers:\n\nfunc RegisterDefaultProviders(f ProviderFactory) {\n    // Real providers\n    f.RegisterProvider(\"openai\", openai.NewProvider)\n    f.RegisterProvider(\"anthropic\", anthropic.NewProvider)\n    // ... other providers\n\n    // Virtual providers\n    f.RegisterProvider(\"racing\", racing.NewRacingProvider)\n    f.RegisterProvider(\"fallback\", fallback.NewFallbackProvider)\n    f.RegisterProvider(\"loadbalance\", loadbalance.NewLoadBalanceProvider)\n}\n\nAcceptance Criteria:\n- Virtual providers registered in factory\n- Virtual provider configuration parsing\n- Provider dependency resolution (racing depends on other providers)\n- Unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:58.041033403Z","updated_at":"2025-11-29T01:59:58.041033403Z","dependencies":[{"issue_id":"workspace-30w","depends_on_id":"workspace-co0","type":"blocks","created_at":"2025-11-29T02:00:40.36448143Z","created_by":"daemon"},{"issue_id":"workspace-30w","depends_on_id":"workspace-2ix","type":"blocks","created_at":"2025-11-29T02:00:40.374955392Z","created_by":"daemon"},{"issue_id":"workspace-30w","depends_on_id":"workspace-xzt","type":"blocks","created_at":"2025-11-29T02:00:40.386779749Z","created_by":"daemon"}]}
{"id":"workspace-9s5","title":"APK 3.3: Add Streaming Support","description":"Add Streaming Support. Priority P1 - High. Estimated: 8 hours.\n\nFeatures:\n- SSE endpoint for streaming generation\n- Proper connection handling\n- Extension hooks for streaming\n\nAcceptance Criteria:\n- SSE endpoint for streaming generation\n- Proper connection handling\n- Extension hooks for streaming","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:47.054071964Z","updated_at":"2025-11-29T01:59:47.054071964Z","dependencies":[{"issue_id":"workspace-9s5","depends_on_id":"workspace-sqx","type":"blocks","created_at":"2025-11-29T02:00:40.352362183Z","created_by":"daemon"}]}
{"id":"workspace-co0","title":"APK 1.4: Implement Racing Virtual Provider","description":"Implement Racing virtual provider. Priority P0 - Blocking. Estimated: 8 hours.\n\nFile: pkg/providers/virtual/racing/provider.go\n\nFeatures:\n- RacingProvider struct with providers, config, performance tracker\n- Config with TimeoutMS, GracePeriodMS, Strategy (first_wins, weighted, quality)\n- GenerateChatCompletion races all providers\n- selectWinner based on strategy\n- firstWinsStrategy - return first success\n- weightedStrategy - collect during grace period, pick best\n- qualityStrategy - wait for all, pick best\n\nFile: pkg/providers/virtual/racing/performance.go\n- PerformanceTracker with stats per provider\n- RecordWin/RecordLoss methods\n- GetScore for weighted selection\n- ProviderStats: TotalRaces, Wins, Losses, AvgLatency, WinRate\n\nAcceptance Criteria:\n- Racing provider implements types.Provider and types.ChatProvider\n- First-wins strategy implemented\n- Weighted strategy with grace period implemented\n- Performance tracking with win rates\n- Thread-safe implementation\n- Unit tests for all strategies","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:17.398548382Z","updated_at":"2025-11-29T01:59:17.398548382Z","dependencies":[{"issue_id":"workspace-co0","depends_on_id":"workspace-30d","type":"blocks","created_at":"2025-11-29T02:00:38.045389978Z","created_by":"daemon"}]}
{"id":"workspace-dm0","title":"APK 4.2: Performance Optimization","description":"Performance Optimization for ai-provider-kit. Priority P2 - Medium. Estimated: 8 hours.\n\nTasks:\n- Profile and optimize hot paths\n- Racing provider optimization\n- Connection pooling\n\nAcceptance Criteria:\n- Hot paths profiled and optimized\n- Racing provider optimized\n- Connection pooling implemented where beneficial","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T02:00:00.00795712Z","updated_at":"2025-11-29T02:00:00.00795712Z","dependencies":[{"issue_id":"workspace-dm0","depends_on_id":"workspace-sqx","type":"blocks","created_at":"2025-11-29T02:00:41.067403809Z","created_by":"daemon"},{"issue_id":"workspace-dm0","depends_on_id":"workspace-30w","type":"blocks","created_at":"2025-11-29T02:00:41.077479909Z","created_by":"daemon"}]}
{"id":"workspace-ezv","title":"APK 1.3: Define API Request/Response Types","description":"Define API request/response types. Priority P0 - Blocking.\n\nFiles:\n- pkg/backendtypes/requests.go - GenerateRequest, ProviderConfigRequest\n- pkg/backendtypes/responses.go - APIResponse, APIError, GenerateResponse, UsageInfo, ProviderInfo, HealthResponse, ProviderHealth\n\nAcceptance Criteria:\n- All request types defined with validation tags\n- All response types defined with JSON tags\n- Consistent with existing types.* types\n- Unit tests for serialization/deserialization","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:16.244023832Z","updated_at":"2025-11-29T01:59:16.244023832Z","dependencies":[{"issue_id":"workspace-ezv","depends_on_id":"workspace-30d","type":"blocks","created_at":"2025-11-29T02:00:38.035154841Z","created_by":"daemon"}]}
{"id":"workspace-fc4","title":"APK 1.7: Create Extension Framework Interface","description":"Create Extension framework interface. Priority P0 - Blocking. Estimated: 6 hours.\n\nFile: pkg/backend/extensions/interface.go\n- Extension interface: Name, Version, Description, Dependencies, Initialize, Shutdown, RegisterRoutes, BeforeGenerate, AfterGenerate, OnProviderError, OnProviderSelected\n- RouteRegistrar interface\n- ExtensionRegistry interface\n- BaseExtension with default implementations\n\nFile: pkg/backend/extensions/registry.go\n- registry struct with extensions map and order slice\n- Register, Get, List methods\n- Initialize with topological sort for dependency ordering\n- Shutdown in reverse order\n\nAcceptance Criteria:\n- Extension interface defined with all lifecycle methods\n- BaseExtension provides sensible defaults\n- Registry handles registration and lifecycle\n- Topological sort for dependency ordering\n- Unit tests for registry operations","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:21.838118915Z","updated_at":"2025-11-29T01:59:21.838118915Z","dependencies":[{"issue_id":"workspace-fc4","depends_on_id":"workspace-30d","type":"blocks","created_at":"2025-11-29T02:00:38.076997299Z","created_by":"daemon"}]}
{"id":"workspace-ksq","title":"APK 1.2: Define Backend Configuration Types","description":"Define backend configuration types in pkg/backendtypes/config.go. Priority P0 - Blocking.\n\nTypes to define:\n- BackendConfig - Main config with Server, Auth, Logging, CORS, Providers, Extensions\n- ServerConfig - Host, Port, Version, timeouts\n- AuthConfig - Enabled, APIPassword, APIKeyEnv, PublicPaths\n- LoggingConfig - Level, Format\n- CORSConfig - AllowedOrigins, Methods, Headers\n- ExtensionConfig - Enabled, Config map\n\nAcceptance Criteria:\n- All configuration types defined\n- YAML tags for serialization\n- Default values documented\n- Unit tests for config validation","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:15.445620167Z","updated_at":"2025-11-29T01:59:15.445620167Z","dependencies":[{"issue_id":"workspace-ksq","depends_on_id":"workspace-30d","type":"blocks","created_at":"2025-11-29T02:00:38.024479113Z","created_by":"daemon"}]}
{"id":"workspace-l46","title":"APK 3.1: Add OAuth Handler","description":"Add OAuth Handler. Priority P1 - High. Estimated: 8 hours.\n\nFeatures:\n- OAuth initiation endpoint\n- OAuth callback endpoint\n- Token refresh endpoint\n- Integration with oauthmanager\n\nAcceptance Criteria:\n- OAuth initiation endpoint\n- OAuth callback endpoint\n- Token refresh endpoint\n- Integration with oauthmanager","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:45.357392527Z","updated_at":"2025-11-29T01:59:45.357392527Z","dependencies":[{"issue_id":"workspace-l46","depends_on_id":"workspace-sqx","type":"blocks","created_at":"2025-11-29T02:00:40.330293091Z","created_by":"daemon"}]}
{"id":"workspace-sqx","title":"APK 2.5: Implement Backend Server","description":"Implement Backend Server. Priority P0 - Blocking. Estimated: 8 hours.\n\nFile: pkg/backend/server.go\n\nFeatures:\n- Server initialization with config\n- Provider initialization (including virtual providers)\n- Extension initialization\n- Middleware application\n- Route setup\n- Graceful shutdown\n\nAcceptance Criteria:\n- Server initialization with config\n- Provider initialization (including virtual providers)\n- Extension initialization\n- Middleware application\n- Graceful shutdown\n- Integration tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:44.370648254Z","updated_at":"2025-11-29T01:59:44.370648254Z","dependencies":[{"issue_id":"workspace-sqx","depends_on_id":"workspace-1nh","type":"blocks","created_at":"2025-11-29T02:00:39.268538144Z","created_by":"daemon"},{"issue_id":"workspace-sqx","depends_on_id":"workspace-2xd","type":"blocks","created_at":"2025-11-29T02:00:39.279677886Z","created_by":"daemon"},{"issue_id":"workspace-sqx","depends_on_id":"workspace-1x4","type":"blocks","created_at":"2025-11-29T02:00:39.289793681Z","created_by":"daemon"},{"issue_id":"workspace-sqx","depends_on_id":"workspace-2fy","type":"blocks","created_at":"2025-11-29T02:00:39.300876577Z","created_by":"daemon"}]}
{"id":"workspace-uud","title":"APK 2.1: Implement Base Handler Utilities","description":"Implement base handler utilities. Priority P0 - Blocking. Estimated: 4 hours.\n\nFile: pkg/backend/handlers/base.go\n\nFeatures:\n- SendSuccess, SendError, SendCreated methods\n- ParseJSON for request parsing\n- Consistent response formatting\n\nAcceptance Criteria:\n- All helper methods implemented\n- Consistent error handling\n- Unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:40.896157798Z","updated_at":"2025-11-29T01:59:40.896157798Z","dependencies":[{"issue_id":"workspace-uud","depends_on_id":"workspace-ksq","type":"blocks","created_at":"2025-11-29T02:00:39.20724421Z","created_by":"daemon"},{"issue_id":"workspace-uud","depends_on_id":"workspace-ezv","type":"blocks","created_at":"2025-11-29T02:00:39.21720205Z","created_by":"daemon"},{"issue_id":"workspace-uud","depends_on_id":"workspace-fc4","type":"blocks","created_at":"2025-11-29T02:00:39.226172251Z","created_by":"daemon"}]}
{"id":"workspace-xzt","title":"APK 1.6: Implement Load Balance Virtual Provider","description":"Implement Load Balance virtual provider. Priority P1 - High. Estimated: 4 hours.\n\nFile: pkg/providers/virtual/loadbalance/provider.go\n\nFeatures:\n- LoadBalanceProvider distributes requests across providers\n- Config with Strategy (round_robin, random, weighted), ProviderNames\n- Atomic counter for round-robin\n- selectProvider based on strategy\n\nAcceptance Criteria:\n- Load balance provider implements types.Provider\n- Round-robin strategy\n- Random strategy\n- Thread-safe counter\n- Unit tests","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:20.0608568Z","updated_at":"2025-11-29T01:59:20.0608568Z","dependencies":[{"issue_id":"workspace-xzt","depends_on_id":"workspace-30d","type":"blocks","created_at":"2025-11-29T02:00:38.066228097Z","created_by":"daemon"}]}
{"id":"workspace-zh8","title":"APK 4.1: Documentation","description":"Documentation for ai-provider-kit backend. Priority P1 - High. Estimated: 8 hours.\n\nDocumentation to create:\n- Package documentation\n- API documentation\n- Extension development guide\n- Virtual provider configuration guide\n- Migration guide\n\nAcceptance Criteria:\n- Package documentation complete\n- API documentation complete\n- Extension development guide complete\n- Virtual provider configuration guide complete\n- Migration guide complete","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T01:59:58.965516167Z","updated_at":"2025-11-29T01:59:58.965516167Z","dependencies":[{"issue_id":"workspace-zh8","depends_on_id":"workspace-sqx","type":"blocks","created_at":"2025-11-29T02:00:41.048178514Z","created_by":"daemon"},{"issue_id":"workspace-zh8","depends_on_id":"workspace-30w","type":"blocks","created_at":"2025-11-29T02:00:41.058054722Z","created_by":"daemon"}]}
